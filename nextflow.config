includeConfig './conf/base.config'

params {
    input                       = "/workspace/pangene/test_data/assemblysheet.csv"

    repeat_annotator            = 'repeatmodeler'
    // 'repeatmodeler' or 'edta'
    save_annotated_te_lib       = true
    edta_is_sensitive           = false
    repeatmasker_save_outputs   = true

    fastq                       = "/workspace/pangene/test_data/fastqsheet.csv"
    // Optional: Set to null if not available

    skip_fastqc                 = false
    skip_fastp                  = false
    min_trimmed_reads           = 10000
    extra_fastp_args            = ""

    save_trimmed                = true
    // toggling this parameter results in rerun of FASTP and FASTQC_TRIM

    remove_ribo_rna             = false
    save_non_ribo_reads         = true
    ribo_database_manifest      = "${projectDir}/assets/rrna-db-defaults.txt"

    star_max_intron_length      = 16000
    star_align_extra_args       = ""
    star_save_outputs           = true
    save_cat_bam                = true
    // A single BAM is created for each assembly from all the RNAseq samples, if there
    // are more than one

    external_protein_fastas     = null

    braker_extra_args           = ""

    liftoff_annotations         = null

    liftoff_coverage            = 0.9
    liftoff_identity            = 0.9

    outdir                      = "./results"

    max_cpus                    = 12
    max_memory                  = 200.GB
    max_time                    = 1.days
}

params {
    validationSkipDuplicateCheck= true
    validationS3PathCheck       = true
}

manifest {
    name                        = 'pangene'
    author                      = """Usman Rashid, Jason Shiller"""
    homePage                    = 'https://github.com/PlantandFoodResearch/pan-gene'
    description                 = """A NextFlow pipeline for pan-genome annotation"""
    mainScript                  = 'main.nf'
    nextflowVersion             = '!>=23.04.4'
    version                     = '0.2.0+dev'
    doi                         = ''
}

def trace_timestamp             = new java.util.Date().format( 'yyyy-MM-dd_HH-mm-ss')
timeline {
    enabled                     = true
    file                        = "${params.outdir}/pipeline_info/execution_timeline_${trace_timestamp}.html"
}
report {
    enabled                     = true
    file                        = "${params.outdir}/pipeline_info/execution_report_${trace_timestamp}.html"
}
trace {
    enabled                     = true
    file                        = "${params.outdir}/pipeline_info/execution_trace_${trace_timestamp}.txt"
}

plugins {
    id 'nf-validation@1.1.3'
}

includeConfig './conf/modules.config'
